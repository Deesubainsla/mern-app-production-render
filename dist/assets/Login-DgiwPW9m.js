import{u as j,r as n,a as b,j as e,b as u,_ as i}from"./index-Biyvj4Bb.js";function w(){const{register:a,handleSubmit:d,formState:{errors:r}}=j(),o=n.useContext(b),[x,c]=n.useState(!0),p=async t=>{const l={email:t.emaillogin,password:t.passwordlogin};try{await u.post("/user/login",l).then(async s=>{i.success(`Welcome ${s.data.user.name}`),localStorage.setItem("User",JSON.stringify(s.data.user)),await o.setuser(s.data.user)})}catch(s){i.error(s==null?void 0:s.response.data.message)}},h=t=>{const l={file:t.file[0]?t.file[0]:m,name:t.name,email:t.email,password:t.password};(async()=>{try{await u.post("/user/signin",l,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{localStorage.setItem("User",JSON.stringify(s.data.user)),o.setuser(s.data.user),i.success(`Welcome ${s.data.user.name}`)})}catch(s){i.error(s==null?void 0:s.response.data.message)}})()},[m,f]=n.useState("https://www.pngall.com/wp-content/uploads/12/Avatar-Profile-PNG-Photos.png");return e.jsx(e.Fragment,{children:x?e.jsx("div",{className:"h-full w-full py-8 flex justify-center items-center",children:e.jsx("div",{className:" bg-white border dark:bg-slate-900 relative rounded-lg  p-8  shadow-xl w-[90%] md:w-1/2",children:e.jsxs("form",{onSubmit:d(p),children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-10",children:"Login"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("span",{children:"Email:"}),e.jsx("br",{}),e.jsx("input",{className:"p-1 w-full dark:text-black outline-none rounded-md border-[2px]",type:"email",placeholder:"Enter your MyBook Email",...a("emaillogin",{required:!0})}),e.jsx("br",{}),r.emaillogin&&e.jsx("span",{className:"text-sm text-red-600",children:"This field is required:"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("span",{children:"Password:"}),e.jsx("br",{}),e.jsx("input",{className:"p-1 w-full dark:text-black outline-none rounded-md border-[2px]",type:"password",placeholder:"Enter your MyBook Password",...a("passwordlogin",{required:!0})}),e.jsx("br",{}),r.passwordlogin&&e.jsx("span",{className:"text-sm text-red-600",children:"This field is required:"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"submit",className:"bg-red-600  h-fit px-2 duration-300 py-1 text-white hover:scale-110 rounded-md mr-4",children:"Login"}),e.jsxs("p",{className:"text-center",children:["Not Registered?",e.jsx("button",{onClick:()=>c(t=>!t),className:"text-blue-600 hover:text-blue-800",children:"Signup"})]})]})]})})}):e.jsx("div",{className:"h-full w-full py-8 flex justify-center items-center",children:e.jsx("div",{className:" bg-white h-fit dark:bg-slate-900 rounded-lg py-4 px-6 shadow-lg w-[90%] md:w-1/2  ",children:e.jsxs("form",{onSubmit:d(h),children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("div",{className:"w-full mb-2   h-[200px]  flex justify-center items-center",children:e.jsx("img",{className:"border-2 h-full  w-[200px] rounded-full",src:m,alt:"uploadedimg"})}),e.jsx("input",{type:"file",...a("file",{onChange:t=>{const l=t.target.files[0];if(l){const s=new FileReader;s.onloadend=()=>{f(s.result)},s.readAsDataURL(l)}}})}),r.file&&e.jsx("span",{className:"text-red-600 text-sm",children:"This field is required:"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("span",{children:"Name:"}),e.jsx("br",{}),e.jsx("input",{className:"p-1 w-full dark:text-black outline-none rounded-md border-[2px]",type:"text",placeholder:"Enter your Name",...a("name",{required:!0})}),e.jsx("br",{}),r.name&&e.jsx("span",{className:"text-red-600 text-sm",children:"This field is required:"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("span",{children:"Email:"}),e.jsx("br",{}),e.jsx("input",{className:"p-1 w-full dark:text-black outline-none rounded-md border-[2px]",type:"email",placeholder:"Temporary Email",...a("email",{required:!0})}),r.email&&e.jsx("span",{className:"text-red-600 text-sm",children:"This field is required:"})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("span",{children:"Password:"}),e.jsx("br",{}),e.jsx("input",{className:"p-1 dark:text-black w-full outline-none rounded-md border-[2px]",type:"password",placeholder:"Password",...a("password",{required:{value:!0,message:"This field is required:"},minLength:{value:8,message:"Minimum 8 letters:"}})}),r.password&&e.jsx("span",{className:"text-red-600 text-sm",children:r.password.message})]}),e.jsx("div",{className:"flex justify-center mb-2 items-center ",children:e.jsx("button",{type:"submit",className:"bg-red-600 h-fit px-2 duration-300 py-1 text-white hover:scale-110 rounded-md mr-4",children:"Signup"})}),e.jsx("div",{className:"flex justify-center ",children:e.jsxs("p",{className:"text-center",children:["Have Account?",e.jsx("button",{onClick:()=>c(t=>!t),className:"text-blue-600 hover:text-blue-800",children:"Login"})]})})]})})})})}export{w as default};
